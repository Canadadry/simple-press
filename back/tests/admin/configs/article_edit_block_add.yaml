unit_tests:

  POST:
    - { url: "/admin/articles/#article_0_slug#/edit/block_add",  status: 400, in: "bad_request/article_edit_block_empty",    out: "bad_request/article_edit_block_empty" }
    - { url: "/admin/articles/#article_0_slug#/edit/block_add",  status: 400, in: "bad_request/article_edit_block_unknown",    out: "bad_request/article_edit_block_unknown" }
    - { url: "/admin/articles/#article_0_slug#/edit/block_add",  status: 201, in: "ok/article_edit_block_add",                 out: "ok/article_edit_block_add" }

scenarios:
  same_rsp_for_block_add_and_article_get:
    - { action: POST, url: "/admin/articles/#article_0_slug#/edit/block_add",  status: 201, in: "ok/article_edit_block_add", out: "ok/article_edit_block_add" }
    - { action: GET , url: "/admin/articles/#article_0_slug#/edit",            status: 200,                                  out: "ok/article_edit_block_add" }

files:

  payloads/bad_request/article_edit_block_empty.json: >
    {
    }

  responses/bad_request/article_edit_block_empty.json: >
    {
      "new_block":["this value should not be blank"],
      "position":[]
    }

  payloads/bad_request/article_edit_block_unknown.json: >
    {
      "new_block": 999
    }

  responses/bad_request/article_edit_block_unknown.json: >
    {
      "new_block": ["invalid id"],
      "position":[]
    }

  payloads/ok/article_edit_block_add.json: >
    {
      "new_block": 1,
      "position":8
    }

  responses/ok/article_edit_block_add.json: >
    {
     	"id": 5,
     	"name": "first_block",
      "position":8,
     	"data": {
      		"DataBool": true,
      		"DataNumber": 2,
      		"DataString": "my data"
     	}
    }
