unit_tests:
  GET:
    - { url: "/admin/articles/#article_0_id#", status: 200, out: "ok/article_get" }

  POST:
    - { url: "/admin/articles/#article_0_id#/edit/metadata",   status: 200, in: "ok/article_edit_metadata_update",           out: "ok/article_edit_metadata_update" }
    - { url: "/admin/articles/#article_0_id#/edit/metadata",   status: 400, in: "bad_request/article_edit_no_title",         out: "bad_request/article_edit_no_title" }
    - { url: "/admin/articles/#article_0_id#/edit/metadata",   status: 400, in: "bad_request/article_edit_no_author",        out: "bad_request/article_edit_no_author" }
    - { url: "/admin/articles/#article_0_id#/edit/content",    status: 200, in: "ok/article_edit_content_update",            out: "ok/article_edit_content_update" }
    - { url: "/admin/articles/#article_0_id#/edit/content",    status: 400, in: "bad_request/article_edit_no_content",       out: "bad_request/article_edit_no_content" }

files:
  responses/ok/article_get.json: >
    {
      "id":"@number@.greaterThan(1)",
      "title":"index",
      "author":"metoo",
      "slug":"index",
      "content":"## content\n\nMy first blog content\n\n![favicon](favicon.png)\n\n",
      "draft":false,
      "layout_id":1,
      "layouts":[
        {"name":"list.html","value":2},
        {"name":"single.html","value":1}
      ],
      "blocks":[
        {"name":"first_block","value":1},
        {"name":"nested_block","value":2}
      ],
      "block_datas":[
        {
          "id":1,
          "name":"first_block",
          "position":2,
          "data":{
            "DataBool":true,
            "DataNumber":2,
            "DataString":"my data"
          }
        }
      ]
    }

  payloads/ok/article_edit_metadata_update.json: >
    {
      "title": "Updated",
      "author": "Alice",
      "slug": "my-article",
      "draft": false,
      "layout": 1
    }

  responses/ok/article_edit_metadata_update.json: >
    {
      "id":"@number@.greaterThan(1)",
      "title":"Updated",
      "author":"Alice",
      "slug":"my-article",
      "content":"@string@.isNotEmpty()",
      "draft":false,
      "layout_id":1,
      "layouts":[
        {"name":"list.html","value":2},
        {"name":"single.html","value":1}
      ],
      "blocks":[
        {"name":"first_block","value":1},
        {"name":"nested_block","value":2}
      ],
      "block_datas":[
        {
          "id":1,
          "name":"first_block",
          "position":2,
          "data":{
            "DataBool":true,
            "DataNumber":2,
            "DataString":"my data"
          }
        }
      ]
    }

  payloads/bad_request/article_edit_no_title.json: >
    {
      "author": "Alice",
      "slug": "my-article",
      "layout":1
    }

  responses/bad_request/article_edit_no_title.json: >
    {
      "title": ["this value should not be blank"],
      "author": [],
      "slug": [],
      "layout": [],
      "draft": []
    }


  payloads/bad_request/article_edit_no_author.json: >
    {
      "title": "Updated",
      "slug": "my-article",
      "layout":1
    }

  responses/bad_request/article_edit_no_author.json: >
    {
      "title": [],
      "author": ["this value should not be blank"],
      "slug": [],
      "layout": [],
      "draft": []
    }


  payloads/ok/article_edit_content_update.json: >
    {
      "content": "New body content"
    }

  responses/ok/article_edit_content_update.json: >
    {
      "id":"@number@.greaterThan(1)",
      "title":"index",
      "author":"metoo",
      "slug":"index",
      "content":"New body content",
      "draft":false,
      "layout_id":1,
      "layouts":[
          {"name":"list.html","value":2},
          {"name":"single.html","value":1}
      ],
      "blocks":[
        {"name":"first_block","value":1},
        {"name":"nested_block","value":2}
      ],
      "block_datas":[
        {
          "id":1,
          "name":"first_block",
          "position":0,
          "data":{
            "DataBool":true,
            "DataNumber":2,
            "DataString":"my data"
          }
        }
      ]
    }

  payloads/bad_request/article_edit_no_content.json: >
    {}

  responses/bad_request/article_edit_no_content.json: >
    {
      "content": ["this value should not be blank"]
    }
