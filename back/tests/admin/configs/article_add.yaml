unit_tests:
  # GET:
  #   - { url: "/admin/articles/add"       , status: 405}
  PATCH:
    - { url: "/admin/articles/add"       , status: 405}
  PUT:
    - { url: "/admin/articles/add"       , status: 405}
  DELETE:
    - { url: "/admin/articles/add"       , status: 405}
  POST:
    - { url: "/admin/articles/add"       , status: 201, in: "ok/article_add", out: "ok/article_add"}
    - { url: "/admin/articles/add"       , status: 201, in: "ok/article_add_draft", out: "ok/article_add_draft"}
    - { url: "/admin/articles/add"       , status: 400, in: "bad_request/article_add_no_title",  out: "bad_request/article_add_no_title"}
    - { url: "/admin/articles/add"       , status: 400, in: "bad_request/article_add_no_author", out: "bad_request/article_add_no_author"}
    - { url: "/admin/articles/add"       , status: 201, in: "ok/article_add_prefix", out: "ok/article_add_prefix"}

# scenario:
#   get_sync_after:
#   get_after_post:
#     - { action: "GET",  url: "/data/fixture"   , status: 200, headers: 'Cookie : X-Auth-Token=#user_0_token#', out: "ok/get_sync_fixture"}
#     - { action: "POST", url: "/data"           , status: 204, headers: 'Cookie : X-Auth-Token=#user_0_token#',in: "ok/sync_post"}
#     - { action: "GET",  url: "/data/fixture"   , status: 200, headers: 'Cookie : X-Auth-Token=#user_0_token#', out: "ok/get_sync_fixture_after"}

files:
  payloads/ok/article_add.json: >
    {
      "title": "first",
      "author":"metoo"
    }
  responses/ok/article_add.json: >
    {
      "id":"@number@.greaterThan(1)",
      "title": "first",
      "slug": "first",
      "author":"metoo",
      "draft":false
    }
  payloads/ok/article_add_draft.json: >
    {
      "title": "first",
      "author":"metoo",
      "draft":true
    }
  responses/ok/article_add_draft.json: >
    {
      "id":"@number@.greaterThan(1)",
      "title": "first",
      "slug": "first",
      "author":"metoo",
      "draft":true
    }
  payloads/bad_request/article_add_no_title.json: >
    {
      "author":"metoo"
    }
  responses/bad_request/article_add_no_title.json: >
    {
      "author":[],
      "folder":[],
      "draft":[],
      "title":["this value should not be blank"]
    }
  payloads/bad_request/article_add_no_author.json: >
    {
      "title":"first"
    }
  responses/bad_request/article_add_no_author.json: >
    {
      "title":[],
      "draft":[],
      "folder":[],
      "author":["this value should not be blank"]
    }
  payloads/ok/article_add_prefix.json: >
    {
      "title": "first with prefix",
      "author":"metoo",
      "folder":"/fr_FR/BloG"
    }
  responses/ok/article_add_prefix.json: >
    {
      "id":"@number@.greaterThan(1)",
      "title": "first with prefix",
      "slug": "fr-fr/blog/first-with-prefix",
      "author":"metoo",
      "draft":false
    }
