unit_tests:
  PATCH:
    - { url: "/admin/files/add", status: 405 }
  PUT:
    - { url: "/admin/files/add", status: 405 }
  DELETE:
    - { url: "/admin/files/add", status: 405 }

  POST:
    - { url: "/admin/files/add", status: 400, in: "file_add_wrong_ct_in", out: "file_add_wrong_ct_in" }
    - { url: "/admin/files/add", status: 400, in: "file_add_invald_request", out: "file_add_invald_request", ct_in: 'multipart/form-data; boundary=WebAppBoundary', headers: "Accept: application/json"}
    - { url: "/admin/files/add", status: 400, in: "file_add_wrong_name", out: "file_add_wrong_name", ct_in: 'multipart/form-data; boundary=WebAppBoundary' , headers: "Accept: application/json"}
    - { url: "/admin/files/add", status: 201, in: "file_add", out: "file_add" , ct_in: 'multipart/form-data; boundary=WebAppBoundary' , headers: "Accept: application/json"}

scenario:
  can_upload_multiple_file_from_zip:
    - { action: "POST" , url: "/admin/files/add", status: 201,in: "file_add_zip", ct_in: 'multipart/form-data; boundary=1fdece492c269799573525fd503a21921c8c3ebd125fdbe2393561d759b2' }
    - { action: "GET"  , url: "/Archive.zip", status: 404}
    - { action: "GET"  , url: "/src/file1.html", status: 200}
    - { action: "GET"  , url: "/assets/css/file2.css", status: 200}

files:
  payloads/file_add_wrong_ct_in.json: >
    {
      "name": "favicon.svg"
    }

  responses/file_add_wrong_ct_in.json: >
    {
      "content":[],
      "name":[],
      "request":[
        "content type should be a multipart/form-data"
      ]
    }


  payloads/file_add_invald_request: >
    {
      "name": "favicon.svg"
    }

  responses/file_add_invald_request.json: >
    {
      "content":[],
      "name":[],
      "request":[
        "cannot parse multipart/form-data"
      ]
    }


  payloads/file_add_wrong_name: |
    --WebAppBoundary
    Content-Disposition: form-data; name="file-1"
    Content-Type: image/svg

    <svg width="300" height="130" xmlns="http://www.w3.org/2000/svg">
      <rect width="200" height="100" x="10" y="10" rx="20" ry="20" fill="blue" />
    </svg>
    --WebAppBoundary
    Content-Disposition: form-data; name="name"

    file-1
    --WebAppBoundary

  responses/file_add_wrong_name.json: >
    {
      "content":["file not found"],
      "name":[],
      "request":[]
    }

  payloads/file_add: |
    --WebAppBoundary
    Content-Disposition: form-data; name="content"; filename="rect.svg"
    Content-Type: image/svg

    <svg width="300" height="130" xmlns="http://www.w3.org/2000/svg">
      <rect width="200" height="100" x="10" y="10" rx="20" ry="20" fill="blue" />
    </svg>
    --WebAppBoundary
    Content-Disposition: form-data; name="name"

    rect.svg
    --WebAppBoundary

  responses/file_add.json: >
    {
      "id":4,
      "name":"rect.svg"
    }
