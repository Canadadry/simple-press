unit_tests:
  POST:
    - { url: "/admin/article/add"       , status: 201, in: "ok/article_add", out: "ok/article_add"}
    - { url: "/admin/article/add"       , status: 201, in: "ok/draft", out: "ok/draft"}
    - { url: "/admin/article/add"       , status: 400, in: "bad_request/no_title", out: "bad_request/no_title"}
    - { url: "/admin/article/add"       , status: 400, in: "bad_request/no_author", out: "bad_request/no_author"}

# scenario:
#   get_sync_after:
#   get_after_post:
#     - { action: "GET",  url: "/data/fixture"   , status: 200, headers: 'Cookie : X-Auth-Token=#user_0_token#', out: "ok/get_sync_fixture"}
#     - { action: "POST", url: "/data"           , status: 204, headers: 'Cookie : X-Auth-Token=#user_0_token#',in: "ok/sync_post"}
#     - { action: "GET",  url: "/data/fixture"   , status: 200, headers: 'Cookie : X-Auth-Token=#user_0_token#', out: "ok/get_sync_fixture_after"}

files:
  payloads/ok/article_add.json: >
    {
      "title": "first",
      "author":"metoo"
    }
  responses/ok/article_add.json: >
    {
      "title": "first",
      "slug": "first",
      "author":"metoo",
      "draft":false
    }
  payloads/ok/draft.json: >
    {
      "title": "first",
      "author":"metoo",
      "draft":true
    }
  responses/ok/draft.json: >
    {
      "title": "first",
      "slug": "first",
      "author":"metoo",
      "draft":true
    }
  payloads/bad_request/no_title.json: >
    {
      "author":"metoo"
    }
  responses/bad_request/no_title.json: >
    {
      "author":[],
      "draft":[],
      "title":["this value should not be blank"]
    }
  payloads/bad_request/no_author.json: >
    {
      "title":"first"
    }
  responses/bad_request/no_author.json: >
    {
      "title":[],
      "draft":[],
      "author":["this value should not be blank"]
    }
